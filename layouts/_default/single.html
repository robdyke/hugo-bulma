{{ define "main" }}

{{ $page := . }}
<main class="main" role="main">
    {{ partial "breadcrumb.html" $page }}
    <section class="section">
        <div class="container">
            {{ if $page.Params.design.tableOfContents.isEnabled }}
                <div class="columns">
                    <div class="column">
                        <article class="content">
                            {{ $page.Content }}
                            <footer>
                                {{ partial "tags.html" $page }}
                                {{ partial "categories.html" $page }}
                            </footer>
                        </article>
                    </div>
                     <div class="column is-3">
                        {{ partial "tableofcontents.html" $page }}
                    </div>
                </div>
            {{ else }}
                <article class="content">
                    {{ $page.Content }}
                    <footer>
                        {{ partial "categories.html" $page }}
                        {{ partial "tags.html" $page }}
                   </footer>
                </article>
            {{ end }} 
        </div>
    </section>
    {{ $numberOfRecords := $page.Site.Params.design.page.single.related.numberOfRecords }}
    {{ $numberOfRecordsPerRow := $page.Site.Params.design.page.single.related.numberOfRecordsPerRow }}
    {{ partial "related.html" (dict "context" $page "isVertical" false "numberOfRecords" $numberOfRecords "numberOfRecordsPerRow" $numberOfRecordsPerRow) }}
</main>
{{ end }}
